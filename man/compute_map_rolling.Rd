% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_map_rolling.R
\name{compute_map_rolling}
\alias{compute_map_rolling}
\title{Rolling MAP latent scores}
\usage{
compute_map_rolling(
  FIT,
  CUTOFF_YEAR,
  MATSTART = NULL,
  YEAR_LENGTH = 365,
  GRAD_EXTENSION = 1.5,
  TIDY = TRUE
)
}
\arguments{
\item{FIT}{Output from \link{fit_EM} or \link{fit_BFGS}}

\item{CUTOFF_YEAR}{Academic year \code{y} whose information is used for the MAP
calculation. Must satisfy \verb{0 <= CUTOFF_YEAR < FIT$data$data_dims$yb}.}

\item{MATSTART}{Starting values for the latent scores}

\item{YEAR_LENGTH}{Length (in days) of an academic year. Defaults to 365.}

\item{GRAD_EXTENSION}{One plus the extra number of academic years retained
beyond \code{CUTOFF_YEAR} when censoring exam information. Defaults to 1.5,
meaning half an extra year is kept.}

\item{TIDY}{Logical; return a tibble instead of a matrix.}
}
\value{
A matrix (or tibble) with MAP estimates of ability and speed based on
the truncated data.
}
\description{
Compute MAP estimates of ability and speed after truncating the history at a
given academic year. The truncation matches the logic used by
\code{\link[=predict_one_year]{predict_one_year()}}, i.e. grades and times after
\code{CUTOFF_YEAR * YEAR_LENGTH + (GRAD_EXTENSION - 1) * YEAR_LENGTH} are discarded and outcomes
occurring after \code{CUTOFF_YEAR} are recoded as "still enrolled".
}
